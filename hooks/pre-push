#!/bin/sh
# === Pre-push hook wrapper (Git Bash compatible) ===

echo "[HOOK] Calling Windows batch..."
cmd.exe /c "D:\Development\Toxicify\Installer\Build-Installer-Simple.bat"
if [ $? -ne 0 ]; then
  echo "[HOOK] Installer failed, aborting push."
  exit 1
fi

echo "[HOOK] Syncing addon files..."
cmd.exe /c "copy \"*.lua\" \"D:\World of Warcraft\_retail_\Interface\AddOns\Toxicify\\\" >nul 2>&1"
cmd.exe /c "copy \"*.toc\" \"D:\World of Warcraft\_retail_\Interface\AddOns\Toxicify\\\" >nul 2>&1"
cmd.exe /c "copy \"Assets\logo.png\" \"D:\World of Warcraft\_retail_\Interface\AddOns\Toxicify\\\" >nul 2>&1"

echo "[HOOK] Pre-push done."
exit 0
