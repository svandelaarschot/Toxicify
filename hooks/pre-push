@echo off
REM === Pre-push hook: Run Installer + Sync WoW Addon ===

set "WOW_PATH=D:\World of Warcraft\_retail_\Interface\AddOns\Toxicify"
set "INSTALLER_PATH=D:\Development\Toxicify\Installer\Build-Installer-Simple.bat"

echo [HOOK] Running pre-push tasks...

REM 1) Run installer build
echo [HOOK] Running installer: %INSTALLER_PATH%
call "%INSTALLER_PATH%"
if errorlevel 1 (
    echo [HOOK] Installer build failed, aborting push.
    exit /b 1
)

REM 2) Sync addon files to WoW
echo [HOOK] Copying files to WoW addon folder...
copy "*.lua" "%WOW_PATH%\" >nul 2>&1
copy "*.toc" "%WOW_PATH%\" >nul 2>&1
copy "Assets\logo.png" "%WOW_PATH%\" >nul 2>&1

echo [HOOK] Pre-push tasks done!
exit 0